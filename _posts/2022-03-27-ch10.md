---
layout: single
title: "Warming-up C programming ch10"
categories: coding
---







# 개념정리

### 1. 구조체의 기본

1. 구조체의 개념

   - 구조체는 서로 다른 데이터형의 변수들을 하나로 묶어서 사용하는 기능
   - 구조체는 C언어에서 사용자 정의형을 만드는 방법

2. 구조체의 정의

   - ```c
     struct content {
         char title[40];
         int price;
         double rate;
     }
     ```

   - 태그이름 (ex. content) : 구조체를 구별하기 위한 이름

   - 구조체의 멤버, 구조체 정의 끝을 나타내는 세미클론

   - 구조체 정의 시 새로운 데이터형이 만들어짐

   - 구조체형의 변수를 선언해야 구조체 변수가 메모리에 할당

   - 구조체의 바이트 크기는 멤버들의 바이트 크기를 모두 더한 것보다 크거나 같다

     - 메모리 정렬
     - 패딩 : c/c++ 컴파일러는 정렬도니 주소에 구조체를 할당하기 위해 멤버 사이에 사용되지 않은 데이터 바이트를 삽입하기도 함

   - 구조체 사용 시 struct 키워드와 태그 이름을 함께 사용

     - ```c
       printf("%d", sizeof(content)); //content가 구조체 이름이라는 것을 알 수 없음
       ```

3. 구조체 변수의 선언 및 초기화

   - ```c
     struct content movie; //struct 태그명 변수명
     ```

   - 구조체 변수를 선언하면 구조체의 멤버들이 선언된 순서대로 메모리에 할당됨

   - 구조체 변수 초기화 시 {} 안에 멤버들의 초기값을 선언된 순서대로 나열한다. (초기화 하지 않으면 쓰레기값 가짐)

4. 구조체 변수의 사용

   - 구조체 멤버에 접근하려면 멤버 접근 연산자(.) 사용

5. 구조체 변수 간의 초기화와 대입

   - 같은 구조체형 변수들끼리 서로 초기화하거나 대입할 수 있음

   - ```c
     struct content c2 = c1; //같은 멤버끼리 1:1로 복사해서 초기화한다.
     c3 = {"aqua", 500, 7.1}; // 대입에는 {}를 사용할 수 없음
     c3.title = c1.title; // 구조체의 멤버인 배열끼리는 대입할 수 없음
     strcpy(c3.title, c1.title); // title이 문자 배열 이므로 문자열 처리함수를 이용
     ```

6. 구조체 변수의 비교

   - 구조체 변수에는 관계 연산자를 사용할 수 없음

   - 구조체의 변수의 값이 같은지 비교하려면 멤버 대 멤버로 비교해야 함

   - ```c
     if(c1 == c2) // 구조체 변수에 관계 연산자를 사용하면 컴파일 에러
     if(strcmp(c1.title, c2.title) == 0 && c1.price && c2.price && c1.rate == c2.rate) // 멤버 대 멤버로 비교    
     ```





### 2. 구조체의 활용

1. 구조체 배열

   1. 구조체 배열의 선언 및 사용

      - ```c
        struct content arr[3]; //크기가 3인 content 구조체 배열
        struct content arr[] = {
            {"aven", 1100, 8.8},
            {"aqua", 550, 7.1},
            {"shaz", 77., 7.4}
        };
        for(i = 0; i <size ; i++)
            printf("arr[%d] = %s, %d, %.1f\n",i,arr[i].title,arr[i].price,arr[i].rate)
        ```

      - 구조체 배열의 원소들 메모리에 연속적으로 할당됨

      - 구조체 배열 초기화 시 {} 안에 배열 원소의 초기값을 나열하고 배열의 크기 생략 가능

      - arr가 구조체 배열의 이름일 때 구조체의 멤버에 접근하려면 arr[i].member로 접근한다.

   2. 구조체 배열의 활용

      - 구조체 배열에 대해서 데이터의 탐색과 정렬같은 기능 구현 가능

2. 구조체 포인터

   - 구조체 포인터는 구조체 변수의 주소를 저장하는 포인터

   - 구조체 포인터 ptr이 가리키는 구조체 변수의 멤버에 접근하려면 `ptr->member` 또는 `(*ptr).member`를 사용

   - ```c
     p->rate = 8.9; //간접 멤버 접근 연산자 ->를 이용해 멤버 접근
     (*p).rate = 8.9; //역참조 연산자 *와 멤버 접근 연산자 .를 이용하는 경우에는 반드시 ()가 필요
     ```

3. 함수의 인자로 구조체 전달하기

   1. 값에 의한 호출
      - 기본형에 비해 크기가 큰 구조체는 복사하는 대신(값에 의한 호출) 구조체의 주소를 전달하는것이 좋음
   2. 참조에 의한 호출
      - 구조체를 복사하지 않고 전달하기위해 포인터로 전달
      - 구조체가 입력 매개변수일 때는 const포인터로 전달하는 것이 좋음
      - 구조체가 함수의 출력 매개변수이거나 입출력 매개변수일 때는 일반 포인터 전달
   3. 구조체를 함수의 인자로 전달하는 방법
      1. 함수의 매개변수는 구조체 포인터형으로 선언
      2. 구조체 변수가 입력 매개변수 일 때는 const 키워드 지정
      3. 구조체를 매개변수로 갖는 함수를 호출할 때는 구조체 변수의 주소를 인자로 전달
      4. 함수를 정의할 때는 구조체 포인터로 구조체의 멤버에 접근

4. 구조체의 멤버로 다른 구조체 사용하기

   - 구조체 안에 다른 구조체 변수를 멤버로 포함할 수 있음



### 3. 열거체와 공용체

1. 열거체

   1. 열거체의 개념

      - 열거체는 정수형의 일종으로 열거형이라고도 함
      - 열거체와 열거 상수를 이용하면 정수형 상수를 보다 쉽게 정의하고 사용 가능

   2. 열거체의 정의 및 사용

      - 열거 상수 : 이름이 있는 정수형 상수

      - ```c
        enum color {red, green, blue};
        enum direction {
            north, south, east, wet
        };	//열거체와 열거 상수 정의
        ```

      - C컴파일러는 열거체를 int형으로 처리하고 열거 상수를 정수형 상수로 정의

      - 특정값으로 정의하려면 열거상수 다음에 =을 쓰고 값을 써줌

      - 열거상수는 지정된 값보다 1씩 커지는 정수값으로 자동으로 설정

2. 공용체

   - 여러멤버들이 메모리를 공유해서 사용하는 기능

   - 공용체의 멤버들은 모두 같은 주소에 할당된다

   - ```c
     union color_t {
         unsigned int dd;
         unsigned char rgb[4];
     };
     ```

   - 공용체의 크기는 멤버 중 가장 큰 멤버의 크기와 같다

3. typedef

   - typedef이용 시 기존의 데이터형에 대한 별명을 만들 수 있다.

   - ```c
     struct point {
         int x,y;
     };
     typedef struct point point_t; //point 구조체에 대해 typedef를 정의함, point_t가 struct point의 별명
     point_t pt1 = {10, 20}; //struct_point 대신 point_t 사용 가능
     ```

   - 구조체를 정의하면서 typedef를 함께 정의하는 방법

   - ```c
     typedef struct point {	//point 구조체를 정의하면서 typedef를 함께 정의
         int x, y;
     } point_t;
     ```





# 프로그래밍 과제



+) #define _CRT_SECURE_NO_WARNINGS

할 때 프로젝트 속성에 들어가서 전처리기 정의할 때에는 #define 제외하고 ;뒤에 _CRT 부터 써주면 된다.



1. 구조체의 정의
   - 우선 구조체를 정의해야한다. 구조체에는 아이디, 패스워드를 받을 수 있는 변수를 담아야한다.
   - 그리고 구조체의 변수를 scanf 함수를 통해 입력받고 출력할 때에는 비밀번호에 해당되는 string문자열의 길이를 알려주는 strlen함수를 통해 그 길이를 알아내고 그 길이만큼의 for문으로 *를 출력하게 해준다.
   - 이때 sizeof(c1.pass)를 하게 되면 구조체 변수에 할당된 char의 갯수만큼을 알려주니 strlen으로 사용하자
2. 구조체를 매개변수로 갖는 함수
   - 구조체를 매개변수로 가지려면 값에 의한 호출보다 참조에 의한 호출로 함수를 만들어보자
   - 아이디와 패스워드를 모두 소문자로 만드는 함수 구현
     - 입력받은 구조체의 변수의 값을 소문자로 바꾸는 형식이니 const포인터를 매개변수로 설정하면 안된다.
     - 소문자로 바꿔주는 함수인 tolower를 사용한다.(라이브러리 <ctype.h>) 그리고 대문자인지를 판별하는 isupper 함수를 활용하여 해당 문자가 대문자면 소문자로 바꿔주는 함수를 구현한다.
   - 아이디와 패스워드를 출력하는 함수 구현
     - 단순히 읽기만 하는 함수이니 const포인터를 사용하자
   - tmi
     - 실화입니까... 이거 하는데 2시간 걸림...
     - 그이유 : for문 조건문에 i <이거 빼먹음ㅋㅋㅋ... 그래서 계속 오류났다.. 이 2글자를 빼먹어서 2시간이 걸리다니 난 정말 멍청이야
     - minkernel\crts\ucrt\src\appcrt\convert\isctype.cpp 이거랑 Expression : c >= -1 && c <= 255 이런 오류가 났는데 이 이유가 어디까지 조사해야되는지 모르니까 나는 오류라고 구글링 해보니까 그러더라구요.. 즉 저는 i < 이거 빼먹어서 얘가 인식을 못햇음...
3. 구조체의 정의, 구조체를 매개변수로 갖는 함수
   - date구조체 구현
     - 연 월 일을 담을 수 있는 int형 변수 3가지 선언
   - date구조체를 매개변수로 전달받아 주어진 형식처럼 출력하는 함수 구현
   - tmi
     - 쉬운 문제였는데 scanf_s에 정수형 받아올 때는 sizeof안해두 되는 구나... 
4. 구조체를 매개변수로 갖는 함수, 구조체 배열
   - 공휴일에 해당하는 날짜를 입력받는 구조체 변수1개 구현
   - 새롭게 입력받은 값을 저장하는 구조체 변수 1개 구현
   - 위의 두개의 구조체를 비교하는 함수 구현 
     - 나는 bool형으로 함수를 선언해서 같으면 true를 반환해주는 함수를 구현하고 싶었는데 이럴수가리 bool을 인식할 수 없다고 프로그램에서 오류가 났다. 그 이유는 c컴파일러에서는 bool이 자동으로 인식할 수 없다고 합니다. 그래서 헤더파일 <stdbool.h>를 포함해주었다.
     - 정말 바보같게도 c1 = c2이게 가능한 경우가 서로 초기화하거나 대입할 수 있는 경우에만 가능한 것을 알고있으면서도 몰랐다. 그래서 if문에 저렇게 조건식을 써놓고 엥 왜안돼! 이러고 있었네.. 
     - 구조체 변수의 값이 같은지 비교하려면 멤버 대 멤버로 비교해야 한다.
   - while 무한반복문으로 0 0 0이면 빠져나오기
5. 구조체의 정의, 구조체를 매개변수로 갖는 함수
   - product구조체 정의
     - 제품명, 가격, 재고정보를 담고 있는 변수 3개 선언
   - product구조체를 매개변수로 전달받아 정보 출력하는 함수
     - 단순 읽기니까 const포인터로
6. 구조체 배열
   - 최대 5개의 제품정보를 입력받을 수 있는 구조체 배열 선언(배열의 크기는 5로 하면 된다)
   - for문의 조건으로 i<5 이렇게 해서 5개의 제품 정보를 입력하면 종료되도록 하고 for문 안에 if문으로 제품명이 .이면 break로 종료되게 한다.
   - for문이 끝나면 다른 for문으로 구조체 배열의 값들을 출력하게 한다.
     - 이때도 제품명이 .이면 break로 종료되게 하자.
7. 구조체를 매개변수로 갖는 함수
   - point 구조체 구현 (변수는 x,y좌표 담을 수 있는 int형 변수 2개)
   - main함수에 구조체 배열 선언 (크기는 10)
     - 매번 입력하기 귀찮으니께 그냥 문제에 나와있는 숫자들로 초기화 미리 해버리자
   - x좌표를 기준으로 정렬
     - 문제에서는 두점의 좌표를 맞바꾸는 함수를 정의하고 이 함수를 통해 x좌표 기준으로 선택정렬하는 프로그램을 작성하라고 했지만 어떻게 활용해야할 지 아이디어가 떠오르지 않는다..
     - 그래서 그냥 정렬만 구현하였다.
8. 공용체
   - 공용체는 모든 변수가 같은 주소에 할당되는 것이다
   - 4바이트의 데이터를 2개의 word로 접근하려면 2바이트의 short형 정수형 변수를 선언하자
   - 공용체의 변수로는 3개가 있는데 4바이트의 dword와 2바이트의 low word, high word가 있다.
   - scanf로 입력받을 때 %x로 16진수형으로 받을 수 있게 했더니 디버깅에서 %hx를 추천한다해서 냉큼 바꿨다
     - 찾아보니까 hx는 unsigned int라고 한다. 더불어 hd, hi는 short int형을 저장한다고 해서 바꿔서 테스트 해봤더니 역시나 안된다. 왜냐하면 d와 i는 10진수 정수로 받기 때문에 abcd와 같은 16진수를 인식하지 못한다. 따라서 hx로 받자
   - 근데 ... 어쳐피 short형이 두개면 첫번째 입력한 값에다가 뒤에 입력한 값이 덮어쓰기 때문에(같은 위치) 결국 abcd만 나오게 된다.. 어케 해야하는거지..
     - 이렇게 풀리지 않을때마다 너무 짱나서 머리털 뜯고싶은 기분이다.
9. 구조체 변수를 멤버로 갖는 구조체의 정의
   - 직사각형 정보를 나타내는 rect 구조체 정의
     - rect구조체 안에 point 구조체 변수 2개 (좌하단점, 우상단점)
   - 이문제에서 지켜야할 것은 rect구조체에서 입출력이 이루어져야한다는 점이다.
     - 즉 rect.lb.x 이렇게 2번 들어가야 됨
10. 구조체 배열, 구조체를 매개변수로 갖는 함수
    - 9번에서 rect 구조체를 선언한 것을 그대로 가져온다
    - 크기가 3인 구조체 배열을 선언하고 주어진 값들로 초기화
    - 정규화 하는 함수 구현
      - 좌하단점이 우상단점보다 크면 둘의 값을 바꿔주는 형식으로 함수를 구현했다.
    - 중심점 구하는 함수 구현
      - 중심점을 담을 temp struct point변수를 선언하자
      - 즉 rect 변수와 중심점 담을 point변수를 매개변수로 전달하자
    - tmi
      - 별 세개라서 겁나 어려울 줄 알았는데 별루 안걸렸다.
11. 구조체 배열, 열거체
    - song 구조체 구현
      - 변수는 곡명, 가수, 장르 세가지에 해당됨
    - 장르는 열거체와 열거상수를 통해 구현
    - 음... 열거상수값인 01234로 출력되네,,
      - 그래서 switch문을 사용해서 해당 상수값이 들어오면 각각의 case에 따라 printf문에 그 상수의 원래의 값(ex. ballad)을 써주는 식으로 구현하였다.
12. 구조체 배열, 배열의 탐색
