---
layout: single
title: "귀무가설, 1종오류, 단(양)측검정"
categories: review
tag: [코드스테이츠, python, 통계]
toc: true
---



# 개념정리



## 가설검정

- 관심 있는 특정 모집단의 특성에 대한 가설을 세우고 이 가설을 샘플 데이터를 사용하여 검토하는 추론의 과정
  - 우리에게 모집단의 모수에 관한 정보를 주는 것
  - 샘플 데이터의 통계치에 대한 정보를 주는 것이 아님

- **귀무가설** (Null Hypothesis)
  - 디폴트 가설로 특별한 사유가 없다면 받아들여지는 가설
- **대립가설** (Alternative Hypothesis)
  - 귀무가설이 충분한 증거로 기각되었을 때 채택되는 가설
- **검정통계량** (Test Statisitcs)
  - 샘플 데이터에서의 통계량
- **귀무분포** (Null Distribution)
  - 귀무가설을 가정했을 때의 확률분포
- **유의확률** (p-value)
  - 귀무가설을 지지하는 정도
- **표본분포** (Sampling Distribution)
  - 모집단에서 샘플을 복원추출하고 매 추출마다 통계치를 계산하였을 때 그 표본의 통계치로 그린 분포
    - 통계치는 대표적으로 평균을 많이 사용해 평균을 사용한 표본 분포를 대표적으로 기술함





### 귀무가설, 대립가설

- **가설검증**
  - 우리가 알고자 하는 질문을 2개의 대립되는 가설로 세우고 이것의 참과 거짓을 수집한 데이터를 통해 판단
- **귀무가설**
  - 데이터를 수집하기 전 사실이라고 믿는 가설
  - 수학적으로 = 포함
- **대립가설**
  - 귀무가설과 대립되는 가설로 우리가 사실이라고 증명하고자 하는 가설
  - 수학적으로 = 포함x





### 1종오류와 2종오류

- **1종 오류**
  - 귀무가설이 참인데 기각한 경우
    - 어떤차이가 우연히 발생하고 이를 사실이라고 잘못 판단한 경우 (경솔하다)
  - alpha = 유의수준
    - 귀무가설이 참인데도 불구하고 기각할 확률
    - 0.05보다 작으면 귀무 가설을 잘못 기각할 가능성이 5% 미만
  - 1종 오류가 치명적인 경우
    - 사람의 유죄를 판결하는 재판
  - 일반적으로 1종 오류 최소화하게 가설을 설계함
- **2종 오류**
  - 귀무가설이 거짓인데 기각하지 않은 경우
    - 어떤 차이가 발생한 것이 사실이지만 우연히 일어났다고 잘못 판단한 경우 (신중하다)
  - beta

![type12error](https://user-images.githubusercontent.com/97875918/184159629-3d565da0-75e7-42a0-b68f-228402dd9f41.JPG)


- 위 그림과 같이 1종오류와 2종류는 동시에 줄일 수 없음





## 검정 방법론

### 단측검정

  

![image](https://user-images.githubusercontent.com/97875918/184161247-c84f3388-a7a3-4a12-b7ba-f592ec99644c.png)

### 양측검정



![image](https://user-images.githubusercontent.com/97875918/184161371-0c89aece-cee9-4b11-bf59-3e79331cbca2.png)

### 가설채택 방법

1. **신뢰구간 확인**

   - 샘플 데이터로 평균의 표본 분포를 시뮬레이트

     - ```python
       means = []
       for _ in range(10000):
         bootsample= drug[drug['성장호르몬_투약'] == True].sample(150, replace=True)
         means.append(bootsample.키.mean())
       ```

   - 이 분포에서 95% 신뢰구간을 확인함

     - ```python
       low, upper = np.percentile(means, 2.5),np.percentile(means, 97.5) 
       plt.hist(means, alpha=0.5)
       plt.axvline(x=low, color='r')
       plt.axvline(x=upper, color='r', label='95% Confidence \n Interval')
       plt.axvline(x=172.5, color='g', label = 'Upper Limit for \n Null Hypothesis')
       plt.legend(fontsize=10);
       ```

   - 귀무가설이 표본 분포에서 어디에 해당하는지 확인하여 귀무가설 기각 유무 결정

2. **p-value 확인**

   - p-value

     - 귀무가설이 맞다는 전제 하에 관측된 사건에서 귀무가설에 반하는 사건이 일어날 확률을 의미
     - p-value는 효과의 크기(effect size)와 표본의 크기(n)의 정보를 한꺼번에 담고 있음
       - 효과의 크기가 커지거나 (ex. 표본 평균간의 차이)
       - 표본의 크기가 커지면
       - p-value가 한없이 작아짐
         - 이러한 문제로 인해 t-value 사용하기도 함

   - 샘플 데이터로 평균의 표본 분포를 시뮬레이트 한 뒤 표준 편차를 변수에 저장

   - 귀무가설과 대립가설의 가장근접한 값과 위의 표준편차를 이용해 귀무 분포를 시뮬레이트

     - 정규분포 모양(중심극한정리)

       - ```python
         # 귀무 u <= 172.5 / 대립 u > 172.5 일때
         null_vals = np.random.normal(172.5, sample_std, 10000) 
         # 귀무 u섭취 <= u미섭취 / 대립 u섭취 > u미섭취
         null_vals = np.random.normal(0, sample_diff_std, 1000) # 우변으로 넘기면 0됨
         ```

   - 위의 기무 분포에 샘플 데이터의 평균값이 어디 있는지 확인

   - 샘플 데이터보다 큰 면적을 확인

     - 0.05보다 작으면 채택

     





## T-test와 t-value

### 검정 통계량

- 통계적 가설의 진위 여부를 검정하기 위해 표본으로부터 계싼하는 통계량
  - 표본 통계량을 2차 가공한 것
  - 검정통계량의 값이 기준을 벗어나는지 확인을 통해 귀무가설 기각 유무 판단

### t-value







# 관련 함수



