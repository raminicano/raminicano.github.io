---
layout: single
title: "중심극한정리, 신뢰 구간, 정규성"
categories: review
tag: [코드스테이츠, python, 통계]
toc: true
---





# 개념정리



## 기본 용어

- **모집단** (Population)
  - 정보를 얻고자 하는 전체집합
  - 모집단이 0과 1로 이루어진 베르누이 분포라면
    - 모집단의 분산 = 모집단의 평균 * (1-모집단의 평균)
- **표본** (Sample)
  - 모집단으로부터 추출된 부분집합
- **모수** (Parameter)
  - 모집단의 특성
  - 모평균, 모표준편차, 모분산 등
  - 추론 (inference)
    - 모수값을 아는 것은 거의 불가능하기에 우리가 가지고 있는 샘플의 통계치를 기반으로 모수에 대한 결론을 도출
- **통계치** (Statistics)
  - 해당 모집단에서 추출한 표본에서의 특성
  - 표본의 평균, 표준편차, 분산 등
- **기술 통계** (Descriptive Statistics)
  - 수집한 데이터를 요약, 묘사, 설명하는 통계기법
- **추리 통계** (Inferential Statistics)
  - 수집한 데이터를 바탕으로 모집단에 대해 추론하는 통계기법
- **표본 분포** (Sampling Distribution)
  - 모집단에서 랜덤으로 추출한 샘플의 통계량의 확률분포
  - 모집단에서 추출한 샘플의 통계치 분포
  - 우리가 가진 한정적인 데이터를 이용해 모수를 추론할 수 있도록 함
  - 코드 구현
    1. Numpy library의 **random.choice** 메서드를 이용해 모집단에서 n개의 데이터를 추출
    2. n개의 데이터의 평균을 계산하여 리스트에 저장
    3. 1번과 2번의 과정을 for loop을 이용하여 xxxxx번 반복, 이후 리스트에는 xxxxx번 추출된 n개의 데이터의 평균값이 저장
    4. 히스토그램을 이용해 리스트에 존재하는 평균값들의 분포를 확인









## 부트스트랩 (Bootstrap)

- 중복 추출을 허용하여 원하는 개수의 데이터를 추출하는 것

- 표본 집단에서 여러번 중복추출을 진행하면서 모수를 추론하는 테크닉

- 코드구현
  - for loop를 사용해 xxxx번 돌림
  
  - 각 반복문마다 random.choice 메서드를 이용해 샘플을 추출
  
  - ```python
    mean_list = []
    for _ in range(10000):
        sample = np.random.choice(df, df.shape[0], replace=True)
        mean_list.append(sample.mean())
    ```
  
- 표본분포를 bootstrapping을 활용해 코드로 구현 가능

- 사용 이유
  - Sampling
    - 모집단이 너무 커 모수를 확인하기 힘든 경우 샘플링을 사용해 표본 분포를 확인
    - ex) 모집단에서 1000개의 데이터를 뽑기
    - 그러나 모집단의 샘플을 여러개 추출하는 것이 많은 리소스를 필요로 할 때가 있음
  - Re-sampling
    - 하나의 샘플을 뽑은 다음(Initial sample) 이 샘플을 모집단처럼 둠
    - 위의 샘플 모집단에서 새롭게 샘플들을 복원추출하여 뽑는 것
      - ex) 모집단에서 표본 30개를 추출한 뒤 그것들의 평균을 구함
    - 이 결과로 모수를 추정할 수 있음

<img src="https://user-images.githubusercontent.com/97875918/183962794-54e618dc-6185-4a17-94a2-fc2f31ae91ac.png" alt="image" style="zoom:60%;" />









## 큰 수의 법칙 (Law of Large Numbers)

- 샘플 사이즈가 커질수록 샘플의 통계치는 모집단의 모수에 가까워진다는 이론
- 샘플 사이즈가 많을수록 모집단의 평균을 측정하긴 좋지만 리소스문제로 인해 적당한 샘플 설정



<img src="https://user-images.githubusercontent.com/97875918/183963960-515fa254-a2e2-4d37-be5d-a809be6db241.png" alt="image" style="zoom:100%;" />







## CLT(Central Limit Theorem, 중심극한정리)

- 모집단의 분포와 상관없이 임의의 분포에서 추출된 표본들의 평균 분포는 정규분포를 이룬다는 이론

  ![clt](https://user-images.githubusercontent.com/97875918/183967459-63cfb016-fbba-497f-b0cf-48246772ae80.JPG)

- 주의할 점

  - 표본 추출 시 충분한 샘플 사이즈를 추출해야 한다.
    - 일반적으로 30이상


  ![ss](https://user-images.githubusercontent.com/97875918/183965814-28ba02fd-1af5-4baa-bbbe-7c4a5fe50bcc.JPG)

- 위의 표본 분포의 평균값은 모집단의 평균 근처에 존재함

  - 모집단의 분포와 상관없이, 모집단의 모수를 추정할 수 있는 확률적 근거를 제시

- 표본 분포의 분산은 샘플사이즈가 많을수록 작아짐









## 정규성

- 연속 확률 분포의 하나

- 중심극한 정리에 의해 독립적인 확률변수들의 평균은 정규분포에 가까워짐

- $$
  N(μ, σ^2)
  $$

- 종모양 (Bell shaped)

  - 평균을 중심으로 사건이 중앙에 가장 많이 분포 (가장 많이 발생한다)
    - 모수 추정 + 가설검정 가능
      - 추리통계 가능하게 함

![image](https://user-images.githubusercontent.com/97875918/184467072-8ab2fd2d-d146-4b9d-8502-0b2d54b120b3.png)

- **정규성 가정**

  - 통계적 검정과 회귀분석을 실행하기 전에 데이터가 정규분포를 따르는지 확인하는 것
    - 정규성을 만족하지 않는 뎅터는 특정 종류의 테스트에 대해 좋지 않은 성능을 보여주기도 함
  - 가설검증이 정규분포를 따른다는 성질을 전제하는 것
    - 통계학에서 가설검증 시 전제하는 주요한 가정
      - 등분산성, 독립성, 정규성

- **정규성 검정**

  - 정규성 가정을 만족하는지 확인하는 것

  ![normality](https://user-images.githubusercontent.com/97875918/184467367-847c8759-831c-4814-ac18-7de31a051123.png)
  
  - Shaprio-Wilk 검정, Kolmogorov-Smirnov 검정
    - 소표본에 평균을 활용한 검정을 위한 모집단 정규성 검정에 적합
  - QQ plot
    - 아주 큰 표본 또는 데이터 변환시 정규에 가까워지는 변화가 있는지 확인하는 것에 많이 사용
    - 큰 표본에 모표본을 확인하는 데 적합
  - 왜도와 첨도
    - 큰 표본에 모표본ㅇ르 확인하는 데 적합

#### 모수적 방법

- 정규성을 갖는다는 모수적 특성을 이용하는 통계적 방법
- sample size >= 30
  - 중심극한 정리에 의해 정규성을 따른다고 가정
- sample size < 30
  - 따로 정규성 검정을 통해 정규분포 임이 확인되면 모수적 방법 사용 가능

#### 비모수적 방법

- 모수적 방법을 사용하지 못하는 경우
  - 정규성 검정에서 정규분포를 따르지 않는다고 증명됨
  - 10명 미만의 소규모 실험에서는 정규분포임을 가정할 수 없음
- 순위합 검정
  - 순위 척도
    - 숫자로 표현되지만 수량화할 수 없고 평균을 낼 수 없음
    - 연속형 자료가 아님
  - 자료를 크기 순으로 배열하여 순위를 매긴 다음 순위의 합을 통해 차이를 비교

### Z-test

- 표준 정규분포 (= z-분포)

  - $$
    Z = {X-μ \over σ}
    $$

    - 위 공식을 통해 X(원점수)를 Z로 정규화 함

  - $$
    N(0, 1)
    $$

- z-분포 (표준 정규 분포)를 이용하여 가설을 검정(test)하는 통계적 방법

  - 정규분포를 가정하며 추출된 표본이 동일한 모집단에 속하는지 가설 검증하기 위해 사용
  - Null hypothesis(귀무가설) : 표본 평균이 모집단 평균과 같음
  - Alternate hypothesis(대립가설) : 표본 평균이 모집단 평균과 같지 않음
  
- 사용 조건

  - 표본 크기가 30 이상
  - 데이터가 서로 독립적
  - 데이터가 정규분포
  - 각각의 데이터는 모집단에서 동일한 확률로 선택되어야 함
  - 비교검정에서는 샘플 크기가 가능한 같아야 함
  
- T -test와의 차이

  - 분산을 모른다 + 표본크기가 <= 30








## 신뢰 구간 (Confidence Interval)

- 모집단의 모수는 정확하게는 알 수 없어 어떠한 특정 값으로 추정함

  - 이는 불확실성을 초래
  - 따라서 추정하기 보단 모수가 포함되어 있을 구간을 확률과 함께 제공
    - 불확실성 줄임
    - 우리가 찾은 모수의 신뢰성을 높여줌

- **신뢰구간**

  - 모수가 존재할 가능성이 높은 구간

  - 샘플링된 표본이 모집단을 얼마나 잘 대표하는지 측정하기 위해 활용

       ![image](https://user-images.githubusercontent.com/97875918/183968861-3301cb30-1db4-4bf7-b944-14ee9af9036e.png)

- **신뢰수준**

  - 신뢰구간이 정확할 것이라고 믿는 확률
  
- 신뢰구간을 이용한 결론 예시

  - 구간 (10,30) 안에 모집단의 평균이 존재할 것이라고 95% 확신한다.







# 코드 정리

## for _ in range(n)

- 인터프리터(Interpreter)에서 마지막 값을 저장할 때
- 값을 무시하고 싶을 때 (흔히 “I don’t care”라고 부른다.)
  - 인덱스가 필요하지 않을 때
- 변수나 함수명에 특별한 의미 또는 기능을 부여하고자 할 때
- 국제화(Internationalization, i18n)/지역화(Localization, l10n) 함수로써 사용할 때
- 숫자 리터럴값의 자릿수 구분을 위한 구분자로써 사용할 때







## 정규성 검사

### shapiro test

```python
# 정규성확인
from scipy import stats
stats.shapiro(g1)
```

- p-value > 0.05 
  - 정규성 만족

